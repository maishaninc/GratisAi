
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as v}from"./index-fd8a5577.js";import{a as R}from"./config-e611a8d0.js";import{d as C,Q as O,r as g,x as w,h as n,o as y,c as k,e,f as l,a as i,l as E,E as M,q as L}from"./index-e656eb90.js";const q={class:"flex justify-between"},h=i("b",null,"邮件发送设置",-1),H=i("b",{class:"mb-5"},"SMTP服务器配置",-1),B=C({__name:"email",setup(j){const a=O({emailRegisterStatus:"",emailLoginStatus:"",MAILER_HOST:"",MAILER_PORT:"",MAILER_USER:"",MAILER_PASS:"",MAILER_SECURE:""}),A=g({registerBaseUrl:[{required:!0,trigger:"blur",message:"请填写注册后端服务基础地址！"}],MAILER_HOST:[{required:!0,trigger:"blur",message:"请填写SMTP服务器地址"}],MAILER_PORT:[{required:!0,trigger:"blur",message:"请填写SMTP服务器端口"}],MAILER_USER:[{required:!0,trigger:"blur",message:"请填写SMTP用户名称"}],MAILER_PASS:[{required:!0,trigger:"blur",message:"请填写SMTP用户密码"}],MAILER_SECURE:[{required:!0,trigger:"blur",message:"是否使用SSL"}]}),m=g();async function c(){const u=await R.queryConfig({keys:["emailRegisterStatus","emailLoginStatus","MAILER_HOST","MAILER_PORT","MAILER_USER","MAILER_PASS","MAILER_SECURE"]});Object.assign(a,u.data)}function b(){var u;(u=m.value)==null||u.validate(async t=>{if(t){try{await R.setConfig({settings:I(a)}),M.success("变更配置信息成功")}catch{}c()}else M.error("请填写完整信息")})}function I(u){return Object.keys(u).map(t=>({configKey:t,configVal:u[t]}))}return w(()=>{c()}),(u,t)=>{const f=n("el-alert"),x=v,V=n("el-button"),p=n("el-switch"),S=n("el-tooltip"),r=n("el-form-item"),_=n("el-col"),s=n("el-row"),d=n("el-input"),T=n("el-checkbox"),P=n("el-form"),U=n("el-card");return y(),k("div",null,[e(x,null,{default:l(()=>[e(f,{closable:!1,"show-icon":"",title:"邮件设置说明",description:"邮件设置主要用于发送注册时的激活邮件。要启用此功能，您首先需要在服务的.env文件中配置邮件服务的相关信息。",type:"success"})]),_:1}),e(U,{style:{margin:"20px"}},{header:l(()=>[i("div",q,[h,e(V,{class:"button",text:"",onClick:b},{default:l(()=>[E(" 保存设置 ")]),_:1})])]),default:l(()=>[e(P,{ref_key:"formRef",ref:m,rules:A.value,model:a,"label-width":"190px"},{default:l(()=>[e(s,null,{default:l(()=>[e(_,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"是否开启邮箱登录",prop:"emailLoginStatus"},{default:l(()=>[e(S,{class:"box-item",effect:"dark",content:"如您启用当前邮箱登录、则用户端可以通过邮箱登录！",placement:"right"},{default:l(()=>[e(p,{modelValue:a.emailLoginStatus,"onUpdate:modelValue":t[0]||(t[0]=o=>a.emailLoginStatus=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(_,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"是否开启邮箱注册",prop:"emailRegisterStatus"},{default:l(()=>[e(S,{class:"box-item",effect:"dark",content:"如您启用当前邮箱注册、则用户端可以通过邮箱注册！",placement:"right"},{default:l(()=>[e(p,{modelValue:a.emailRegisterStatus,"onUpdate:modelValue":t[1]||(t[1]=o=>a.emailRegisterStatus=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[H]),_:1}),e(s,null,{default:l(()=>[e(_,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"SMTP服务器地址",prop:"MAILER_HOST"},{default:l(()=>[e(d,{modelValue:a.MAILER_HOST,"onUpdate:modelValue":t[2]||(t[2]=o=>a.MAILER_HOST=o),placeholder:"示例: smtp.example.com",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(_,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"SMTP服务器端口",prop:"MAILER_PORT"},{default:l(()=>[e(d,{modelValue:a.MAILER_PORT,"onUpdate:modelValue":t[3]||(t[3]=o=>a.MAILER_PORT=o),placeholder:"示例: 465",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(_,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"SMTP用户名称",prop:"MAILER_USER"},{default:l(()=>[e(d,{modelValue:a.MAILER_USER,"onUpdate:modelValue":t[4]||(t[4]=o=>a.MAILER_USER=o),placeholder:"SMTP认证用户名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(_,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"SMTP用户密码",prop:"MAILER_PASS"},{default:l(()=>[e(d,{modelValue:a.MAILER_PASS,"onUpdate:modelValue":t[5]||(t[5]=o=>a.MAILER_PASS=o),placeholder:"SMTP认证密码",type:"password","show-password":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:l(()=>[e(_,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(r,{label:"邮箱SSL配置",prop:"MAILER_SECURE"},{default:l(()=>[e(T,{modelValue:a.MAILER_SECURE,"onUpdate:modelValue":t[6]||(t[6]=o=>a.MAILER_SECURE=o),"true-label":"1","false-label":"0"},{default:l(()=>[E(" 启用SSL ")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof L=="function"&&L(B);export{B as default};
