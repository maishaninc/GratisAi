
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as q}from"./index-fd8a5577.js";import{a as A}from"./config-e611a8d0.js";import{d as E,Q as z,r as x,x as K,h as r,o as s,c as m,e,f as l,a as w,l as U,I as h,S as M,U as J,E as y,t as Q,q as N}from"./index-e656eb90.js";const W={class:"flex justify-between"},$=w("b",null,"网站基础配置",-1),X=["src"],Y=["src"],Z=["src"],ee=["src"],le=E({__name:"baseConfiguration",setup(ae){const I=[{label:"聊天对话",path:"/chat"},{label:"专业绘画",path:"/midjourney"},{label:"绘画广场",path:"/market"},{label:"思维导图",path:"/mind"},{label:"应用中心",path:"/chatStore"},{label:"不指定首页",path:""}],a=z({siteName:"",vxNumber:"",robotAvatar:"",userDefautlAvatar:"",filingNumber:"",companyName:"",buyCramiAddress:"",siteUrl:"",isShowAppCatIcon:"",clientFavoIconPath:"",clientLogoPath:"",clientHomePath:"",copyrightTitle:"",copyrightUrl:""}),L=x({siteName:[{required:!0,trigger:"blur",message:"请填写网站名称"}],copyrightUrl:[{trigger:"blur",message:"请填写底部版权文字内容"}],copyrightTitle:[{trigger:"blur",message:"请填写点击底部版本跳转的地址"}]}),v=x(),p=x("/api/upload/file");async function V(){const o=await A.queryConfig({keys:["siteName","vxNumber","robotAvatar","userDefautlAvatar","filingNumber","companyName","isShowAppCatIcon","clientLogoPath","clientFavoIconPath","clientHomePath","copyrightUrl","copyrightTitle","siteUrl"]});Object.assign(a,o.data)}function k(){var o;(o=v.value)==null||o.validate(async t=>{if(t){try{await A.setConfig({settings:S(a)}),y.success("变更配置信息成功")}catch{}V()}else y.error("请填写完整信息")})}const F=(o,t)=>{console.log("response: ",o.data),a.clientLogoPath=o.data},j=(o,t)=>{console.log("response: ",o.data),a.clientFavoIconPath=o.data},C=(o,t)=>{console.log("response: ",o.data),a.robotAvatar=o.data},D=(o,t)=>{console.log("response: ",o.data),a.userDefautlAvatar=o.data},f=o=>{if(["image/png","image/jpeg","image/gif","image/webp"].includes(o.type)){if(o.size/1024>300)return y.error("当前限制文件最大不超过 300KB!"),!1}else return y.error("当前系统仅支持 PNG、JPEG、GIF、和 WebP 格式的图片!"),!1};function S(o){return Object.keys(o).map(t=>({configKey:t,configVal:o[t]}))}return K(()=>{V()}),(o,t)=>{const P=r("el-alert"),O=q,G=r("el-button"),d=r("el-input"),i=r("el-form-item"),u=r("el-col"),c=r("el-row"),_=r("Plus"),g=r("el-icon"),b=r("el-upload"),R=r("el-radio"),T=r("el-radio-group"),B=r("el-form"),H=r("el-card");return s(),m("div",null,[e(O,null,{default:l(()=>[e(P,{closable:!1,"show-icon":"",title:"网站基础配置说明",description:"网站基础配置支持即时更新网站的主要视觉与功能元素。配置内容包括网站名称、备案号、版权信息、LOGO与ICO、默认AI头像与用户头像，以及首页设置等。请认真填写各项配置，确保提供给用户的信息准确无误。",type:"success"})]),_:1}),e(H,{style:{margin:"20px"}},{header:l(()=>[w("div",W,[$,e(G,{class:"button",text:"",onClick:k},{default:l(()=>[U(" 保存设置 ")]),_:1})])]),default:l(()=>[e(B,{ref_key:"formRef",ref:v,rules:L.value,model:a,"label-width":"150px"},{default:l(()=>[e(c,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"网站名称",prop:"siteName"},{default:l(()=>[e(d,{modelValue:a.siteName,"onUpdate:modelValue":t[0]||(t[0]=n=>a.siteName=n),placeholder:"网站名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"网站地址",prop:"siteUrl"},{default:l(()=>[e(d,{modelValue:a.siteUrl,"onUpdate:modelValue":t[1]||(t[1]=n=>a.siteUrl=n),placeholder:"网站地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"公司/组织名称",prop:"companyName"},{default:l(()=>[e(d,{modelValue:a.companyName,"onUpdate:modelValue":t[2]||(t[2]=n=>a.companyName=n),placeholder:"填入具体的公司或组织名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"网站备案号",prop:"filingNumber"},{default:l(()=>[e(d,{modelValue:a.filingNumber,"onUpdate:modelValue":t[3]||(t[3]=n=>a.filingNumber=n),placeholder:"填写网站备案信息的备案号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"用户端LOGO",prop:"clientLogoPath"},{default:l(()=>[e(d,{modelValue:a.clientLogoPath,"onUpdate:modelValue":t[4]||(t[4]=n=>a.clientLogoPath=n),placeholder:"请填写或上传网站 LOGO 图片 URL",clearable:""},{append:l(()=>[e(b,{class:"avatar-uploader",action:p.value,"show-file-list":!1,"on-success":F,"before-upload":f,style:{"align-items":"center","justify-content":"center",display:"flex"}},{default:l(()=>[a.clientLogoPath?(s(),m("img",{key:0,src:a.clientLogoPath,style:{margin:"5px 0","max-width":"1.5rem","max-height":"1.5rem","object-fit":"contain"}},null,8,X)):(s(),h(g,{key:1},{default:l(()=>[e(_)]),_:1}))]),_:1},8,["action"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"网站 ico",prop:"clientFavoIconPath"},{default:l(()=>[e(d,{modelValue:a.clientFavoIconPath,"onUpdate:modelValue":t[5]||(t[5]=n=>a.clientFavoIconPath=n),placeholder:"请填写或上传网站 ico URL",clearable:""},{append:l(()=>[e(b,{class:"avatar-uploader",action:p.value,"show-file-list":!1,"on-success":j,"before-upload":f,style:{"align-items":"center","justify-content":"center",display:"flex"}},{default:l(()=>[a.clientFavoIconPath?(s(),m("img",{key:0,src:a.clientFavoIconPath,style:{margin:"5px 0","max-width":"1.5rem","max-height":"1.5rem","object-fit":"contain"}},null,8,Y)):(s(),h(g,{key:1},{default:l(()=>[e(_)]),_:1}))]),_:1},8,["action"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"AI头像",prop:"robotAvatar"},{default:l(()=>[e(d,{modelValue:a.robotAvatar,"onUpdate:modelValue":t[6]||(t[6]=n=>a.robotAvatar=n),placeholder:"请填写或上传网站 AI 头像 URL、为空将根据模型自动显示",clearable:""},{append:l(()=>[e(b,{class:"avatar-uploader",action:p.value,"show-file-list":!1,"on-success":C,"before-upload":f,style:{"align-items":"center","justify-content":"center",display:"flex"}},{default:l(()=>[a.robotAvatar?(s(),m("img",{key:0,src:a.robotAvatar,style:{margin:"5px 0","max-width":"1.5rem","max-height":"1.5rem","object-fit":"contain"}},null,8,Z)):(s(),h(g,{key:1},{default:l(()=>[e(_)]),_:1}))]),_:1},8,["action"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(u,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"用户默认头像",prop:"userDefautlAvatar"},{default:l(()=>[e(d,{modelValue:a.userDefautlAvatar,"onUpdate:modelValue":t[7]||(t[7]=n=>a.userDefautlAvatar=n),placeholder:"请填写或上传网站新用户默认的头像 URL",clearable:""},{append:l(()=>[e(b,{class:"avatar-uploader",action:p.value,"show-file-list":!1,"on-success":D,"before-upload":f,style:{"align-items":"center","justify-content":"center",display:"flex"}},{default:l(()=>[a.userDefautlAvatar?(s(),m("img",{key:0,src:a.userDefautlAvatar,style:{margin:"5px 0","max-width":"1.5rem","max-height":"1.5rem","object-fit":"contain"}},null,8,ee)):(s(),h(g,{key:1},{default:l(()=>[e(_)]),_:1}))]),_:1},8,["action"])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:l(()=>[e(u,{xs:24,md:24,lg:24,xl:24},{default:l(()=>[e(i,{label:"设置指定首页",prop:"clientHomePath"},{default:l(()=>[e(T,{modelValue:a.clientHomePath,"onUpdate:modelValue":t[8]||(t[8]=n=>a.clientHomePath=n)},{default:l(()=>[(s(),m(M,null,J(I,n=>e(R,{key:n.path,size:"small",border:"",label:n.path},{default:l(()=>[U(Q(n.label),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof N=="function"&&N(le);export{le as default};
