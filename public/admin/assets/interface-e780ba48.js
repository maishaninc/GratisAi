
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as T}from"./index-fd8a5577.js";import{a as B}from"./config-e611a8d0.js";import{d as w,Q as C,r as h,x as k,h as n,o as v,c as q,e,f as l,a as g,l as y,E as j,q as M}from"./index-e656eb90.js";const K={class:"flex justify-between"},N=g("b",null,[y("接口设置："),g("a",{href:"https://api.lightai.io",target:"_blank",style:{"margin-right":"10px"}},"第三方中转"),y("推荐")],-1),I=w({__name:"interface",setup(D){const o=C({openaiBaseUrl:"",openaiBaseKey:"",openaiTimeout:"",openaiBaseModel:"gpt-3.5-turbo-0125",mjNotSaveImg:0,mjProxyImgUrl:"",systemPreMessage:"",mjNotUseProxy:1,isMjTranslate:0,mjTranslatePrompt:"",isDalleChat:1}),U=h({openaiBaseUrl:[{required:!1,trigger:"blur",message:"请填写openai的请求地址"}],isMjTranslate:[{required:!1,trigger:"blur",message:"是否开启翻译/联想"}],isDalleChat:[{required:!1,trigger:"blur",message:"是否开启连续绘画"}],openaiTimeout:[{required:!1,trigger:"blur",message:"请填写openai的超时时间（单位ms）"}],openaiBaseModel:[{required:!1,trigger:"blur",message:"请填写全局模型，用于后台一些静默性赋能操作"}],mjTranslatePrompt:[{required:!1,trigger:"blur",message:"用于翻译 / 联想的提示词"}]}),b=h();async function x(){const s=await B.queryConfig({keys:["openaiBaseUrl","openaiBaseKey","openaiTimeout","openaiBaseModel","mjNotSaveImg","mjProxyImgUrl","systemPreMessage","mjNotUseProxy","isMjTranslate","mjTranslatePrompt","isDalleChat"]}),{openaiBaseUrl:a="",openaiBaseKey:u="",openaiTimeout:d=300,openaiBaseModel:f="gpt-3.5-turbo-0125",isMjTranslate:r="",mjNotSaveImg:i,mjProxyImgUrl:p,systemPreMessage:m,mjNotUseProxy:c,mjTranslatePrompt:_,isDalleChat:t}=s.data;Object.assign(o,{openaiBaseUrl:a,openaiBaseKey:u,openaiTimeout:d,isMjTranslate:r,openaiBaseModel:f,mjNotSaveImg:i,mjProxyImgUrl:p,systemPreMessage:m,mjNotUseProxy:c,mjTranslatePrompt:_,isDalleChat:t})}function V(){var s;(s=b.value)==null||s.validate(async a=>{if(a){try{await B.setConfig({settings:P(o)}),j.success("变更配置信息成功")}catch{}x()}else j.error("请填写完整信息")})}function P(s){return Object.keys(s).map(a=>({configKey:a,configVal:s[a]}))}return k(()=>{x()}),(s,a)=>{const u=n("el-alert"),d=T,f=n("el-button"),r=n("el-input"),i=n("el-form-item"),p=n("el-col"),m=n("el-row"),c=n("el-form"),_=n("el-card");return v(),q("div",null,[e(d,null,{default:l(()=>[e(u,{closable:!1,"show-icon":"",title:"全局配置说明",description:"系统默认的地址是 https://api.openai.com 、如果你是国内的服务器可能无法访问、您可以使用自己的代理地址、此处的配置为全局配置、我们可以对单张key进行单独设置、当我们对key不进行设置的时候将会走此处的设置、如果此处也没有设置、系统将会走系统内置默认配置！",type:"success"})]),_:1}),e(_,{style:{margin:"20px"}},{header:l(()=>[g("div",K,[N,e(f,{class:"button",text:"",onClick:V},{default:l(()=>[y(" 保存设置 ")]),_:1})])]),default:l(()=>[e(c,{ref_key:"formRef",ref:b,rules:U.value,model:o,"label-width":"220px"},{default:l(()=>[e(m,null,{default:l(()=>[e(p,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"请求地址",prop:"openaiBaseUrl","label-width":"120px"},{default:l(()=>[e(r,{modelValue:o.openaiBaseUrl,"onUpdate:modelValue":a[0]||(a[0]=t=>o.openaiBaseUrl=t),placeholder:"默认地址: https://api.openai.com 第三方代理推荐：https://api.lightai.io",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(p,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"全局key",prop:"openaiBaseKey","label-width":"120px"},{default:l(()=>[e(r,{modelValue:o.openaiBaseKey,"onUpdate:modelValue":a[1]||(a[1]=t=>o.openaiBaseKey=t),placeholder:"请填写模型全局 Key 信息，当模型 Key 为空时调用",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(p,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"全局模型",prop:"openaiBaseModel","label-width":"120px"},{default:l(()=>[e(r,{modelValue:o.openaiBaseModel,"onUpdate:modelValue":a[2]||(a[2]=t=>o.openaiBaseModel=t),placeholder:"全局模型配置，用于后台一些静默赋能操作",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(p,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"超时时间",prop:"openaiTimeout","label-width":"120px"},{default:l(()=>[e(r,{modelValue:o.openaiTimeout,"onUpdate:modelValue":a[3]||(a[3]=t=>o.openaiTimeout=t),placeholder:"openai超时时间设置、默认300s 单位：秒（s）",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,null,{default:l(()=>[e(p,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(i,{label:"全局头部预设",prop:"systemPreMessage","label-width":"120px"},{default:l(()=>[e(r,{modelValue:o.systemPreMessage,"onUpdate:modelValue":a[4]||(a[4]=t=>o.systemPreMessage=t),type:"textarea",rows:8,placeholder:"请填写模型全局头部预设信息！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof M=="function"&&M(I);export{I as default};
