
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as ae}from"./index-fd8a5577.js";import{Y as N,d as se,r as p,C as re,B as R,x as de,h as s,o as g,c as ie,e as l,f as u,a as d,l as a,t as v,I,J as T,b as L,E as P,q as Y}from"./index-e656eb90.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-117764b5.js";const q={quertMenu:m=>N.get("menu/query",{params:m}),visibleMenu:m=>N.post("menu/visible",m),setMenu:m=>N.post("menu/setMenu",m),delMenu:m=>N.post("menu/delete",m),updateIcon:m=>N.post("menu/updateIcon",m)},pe={class:"flex justify-between"},fe=d("b",null,"客户端动态菜单设置",-1),ce={class:"flex items-center"},_e={class:"flex items-center"},ve={class:"dialog-footer"},ye={style:{display:"flex","align-items":"center"}},ge=d("span",{style:{width:"130px"}},"修改ICON编码:",-1),be={style:{display:"flex","align-items":"center","margin-top":"12px"}},we=d("span",{style:{width:"130px"}},"修改菜单名称:",-1),Ve={style:{display:"flex","align-items":"center","margin-top":"12px"}},Ie=d("span",{style:{width:"130px"}},"修改菜单排序:",-1),Te={class:"dialog-footer"},he=se({__name:"menu",setup(m){const h=p(1),x=p(),b=p(!1),c=p(0),C=p(""),U=p(""),k=p(0),S=p(!1),n=p({menuTipText:"",menuIframeUrl:"",isJump:!1,isShow:!0,menuIcon:"",menuPath:"",order:1e3,isNeedAuth:!1,isSystem:!0}),G={menuTipText:[{required:!0,trigger:"blur",message:"请填写菜单名称"}],menuIframeUrl:[{required:!0,trigger:"blur",message:"请填写三方网页地址"}],isJump:[{required:!0,trigger:"blur",message:"请确认是否跳转"}],isShow:[{required:!0,trigger:"blur",message:"请确认是否打开菜单"}],menuIcon:[{required:!0,trigger:"blur",message:"请填写ICON图标"}],order:[{required:!0,trigger:"blur",message:"请填写排序ID"}],menuPath:[{required:!0,trigger:"blur",message:"请填写菜单路径"}],isSystem:[{required:!0,trigger:"blur",message:"请确认是否是系统内地址"}],isNeedAuth:[{required:!0,trigger:"blur",message:"请确认是否需要权限"}]};re(h,o=>{w()});const H=R(()=>c.value>0?"编辑菜单":"添加菜单"),K=R(()=>c.value>0?"确认修改":"确认添加"),D=p([]);async function w(){const o=await q.quertMenu({menuPlatform:h.value});D.value=o.data}function F(o){o==null||o.resetFields(),c.value=0}async function Q(o){const{id:t}=o;await q.visibleMenu({id:t}),P.success("操作成功！"),w()}async function W(o){await q.delMenu({id:o.id}),P.success("操作成功！"),w()}async function X(){var o;(o=x.value)==null||o.resetFields(),c.value=0,b.value=!0}async function Z(o){o==null||o.validate(async t=>{if(!t)return;const y=Object.assign(n.value,{id:c},{menuPlatform:h.value});await q.setMenu(y),P.success("操作成功！"),o.resetFields(),b.value=!1,w()})}function E(o){const{id:t,menuTipText:y,menuIframeUrl:M,isJump:V,isShow:z,menuIcon:O,menuPath:A,order:i,isNeedAuth:r}=o;c.value=t,n.value={menuTipText:y,menuIframeUrl:M,isJump:V,isShow:z,menuIcon:O,menuPath:A,order:i,isNeedAuth:r,isSystem:!A},b.value=!0}async function ee(o){console.log("row: ",o);const{id:t,menuIcon:y,menuTipText:M,order:V}=o;C.value=y,U.value=M,k.value=V,c.value=t,S.value=!0}async function le(){if(!C.value||!U.value||!k.value)return P.error("请填写ICON编码");const o={id:c.value,menuIcon:C.value,menuTipText:U.value,order:k.value};await q.updateIcon(o),P.success("操作成功！"),w(),S.value=!1}return de(()=>{w()}),(o,t)=>{const y=s("el-alert"),M=ae,V=s("el-radio-button"),z=s("el-radio-group"),O=s("Plus"),A=s("el-icon"),i=s("el-button"),r=s("el-table-column"),J=s("el-tag"),te=s("el-popconfirm"),ue=s("el-table"),oe=s("el-card"),$=s("el-switch"),f=s("el-form-item"),_=s("el-input"),ne=s("el-form"),j=s("el-dialog");return g(),ie("div",null,[l(M,null,{default:u(()=>[l(y,{closable:!1,"show-icon":"",title:"动态菜单配置说明",description:"为了确保动态菜单的有效配置，系统要求至少设置一个菜单项。如果未进行配置，系统将默认展示对话页面。菜单项通过排序 ID 来决定显示顺序，其中数值越小的项排在越前面。需要注意的是，PC 端和移动端的菜单配置是独立的，允许进行不同的设置以适应不同设备的显示需求。",type:"success"})]),_:1}),l(oe,{style:{margin:"20px"}},{header:u(()=>[d("div",pe,[fe,d("div",ce,[l(z,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=e=>h.value=e),size:"large"},{default:u(()=>[l(V,{label:1},{default:u(()=>[a("PC端")]),_:1}),l(V,{label:0},{default:u(()=>[a("移动端")]),_:1})]),_:1},8,["modelValue"]),l(i,{size:"large",class:"ml-5",onClick:X},{default:u(()=>[a(" 添加菜单 "),l(A,{class:"ml-3"},{default:u(()=>[l(O)]),_:1})]),_:1})])])]),default:u(()=>[l(ue,{data:D.value,style:{width:"100%"}},{default:u(()=>[l(r,{prop:"menuTipText",label:"菜单文本"}),l(r,{prop:"menuType",label:"菜单类型"},{default:u(e=>[l(J,{type:e.row.menuType?"success":"danger"},{default:u(()=>[a(v(e.row.menuType===0?"系统预设":"自定义菜单"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"isJump",label:"是否打开新窗口"},{default:u(e=>[l(J,{type:e.row.isJump?"success":"danger"},{default:u(()=>[a(v(e.row.isJump?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"isShow",label:"是否显示菜单"},{default:u(e=>[l(J,{type:e.row.isShow?"success":"danger"},{default:u(()=>[a(v(e.row.isShow?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"isNeedAuth",label:"是否需要登录访问"},{default:u(e=>[l(J,{type:e.row.isNeedAuth?"success":"danger"},{default:u(()=>[a(v(e.row.isNeedAuth?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"menuIcon",label:"菜单图标"},{default:u(e=>[l(me,{style:{"font-size":"24px"},icon:e.row.menuIcon},null,8,["icon"])]),_:1}),l(r,{prop:"order",label:"排序"}),l(r,{prop:"menuPath",label:"菜单路径"},{default:u(e=>[a(v(e.row.menuPath||"---"),1)]),_:1}),l(r,{prop:"menuIframeUrl",label:"三方网页链接"},{default:u(e=>[a(v(e.row.menuIframeUrl||"---"),1)]),_:1}),l(r,{label:"操作"},{default:u(e=>[d("div",_e,[e.row.menuType?(g(),I(i,{key:0,onClick:B=>E(e.row),size:"small"},{default:u(()=>[a("编辑菜单")]),_:2},1032,["onClick"])):T("",!0),e.row.menuType?T("",!0):(g(),I(i,{key:1,onClick:B=>ee(e.row),size:"small"},{default:u(()=>[a("修改默认")]),_:2},1032,["onClick"])),e.row.menuType?T("",!0):(g(),I(i,{key:2,onClick:B=>Q(e.row),type:e.row.isShow?"danger":"success",size:"small"},{default:u(()=>[a(v(e.row.isShow?"隐藏菜单":"打开菜单"),1)]),_:2},1032,["onClick","type"])),e.row.menuType?(g(),I(te,{key:3,title:"是否删除当前菜单？",onConfirm:B=>W(e.row)},{reference:u(()=>[l(i,{type:"danger",size:"small"},{default:u(()=>[a("删除菜单")]),_:1})]),_:2},1032,["onConfirm"])):T("",!0)])]),_:1})]),_:1},8,["data"])]),_:1}),l(j,{modelValue:b.value,"onUpdate:modelValue":t[12]||(t[12]=e=>b.value=e),"close-on-click-modal":!1,title:L(H),width:"570",onClose:t[13]||(t[13]=e=>F(x.value))},{footer:u(()=>[d("span",ve,[l(i,{onClick:t[10]||(t[10]=e=>b.value=!1)},{default:u(()=>[a("我再想想")]),_:1}),l(i,{type:"primary",onClick:t[11]||(t[11]=e=>Z(x.value))},{default:u(()=>[a(v(L(K)),1)]),_:1})])]),default:u(()=>[l(ne,{ref_key:"formRef",ref:x,"label-width":"140",rules:G,model:n.value},{default:u(()=>[l(f,{label:"是否打开菜单",prop:"isShow"},{default:u(()=>[l($,{modelValue:n.value.isShow,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.isShow=e)},null,8,["modelValue"])]),_:1}),l(f,{label:"是否属于三方网页",prop:"isSystem"},{default:u(()=>[l($,{modelValue:n.value.isSystem,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.isSystem=e)},null,8,["modelValue"])]),_:1}),l(f,{label:"菜单文本提示信息",prop:"menuTipText"},{default:u(()=>[l(_,{modelValue:n.value.menuTipText,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.menuTipText=e),placeholder:"请填写菜单提示文字"},null,8,["modelValue"])]),_:1}),l(f,{label:"菜单图标编号",prop:"menuIcon"},{default:u(()=>[l(_,{modelValue:n.value.menuIcon,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.menuIcon=e),placeholder:"请填写菜单ICON图标"},null,8,["modelValue"])]),_:1}),n.value.isSystem?(g(),I(f,{key:0,label:"加载三方网页地址",prop:"menuIframeUrl"},{default:u(()=>[l(_,{modelValue:n.value.menuIframeUrl,"onUpdate:modelValue":t[5]||(t[5]=e=>n.value.menuIframeUrl=e),placeholder:"请填写加载的三方网页地址"},null,8,["modelValue"])]),_:1})):T("",!0),l(f,{label:"数字编号排序",prop:"order"},{default:u(()=>[l(_,{modelValue:n.value.order,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value.order=e),type:"number",placeholder:"请填写排序Id、越小越靠前"},null,8,["modelValue"])]),_:1}),n.value.isSystem?T("",!0):(g(),I(f,{key:1,label:"系统内菜单路径",prop:"menuPath"},{default:u(()=>[l(_,{modelValue:n.value.menuPath,"onUpdate:modelValue":t[7]||(t[7]=e=>n.value.menuPath=e),placeholder:"请填写系统内置菜单地址"},null,8,["modelValue"])]),_:1})),l(f,{label:"是否打开新窗口",prop:"isJump"},{default:u(()=>[l($,{modelValue:n.value.isJump,"onUpdate:modelValue":t[8]||(t[8]=e=>n.value.isJump=e)},null,8,["modelValue"])]),_:1}),l(f,{label:"是否需要登录访问",prop:"isNeedAuth"},{default:u(()=>[l($,{modelValue:n.value.isNeedAuth,"onUpdate:modelValue":t[9]||(t[9]=e=>n.value.isNeedAuth=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(j,{modelValue:S.value,"onUpdate:modelValue":t[18]||(t[18]=e=>S.value=e),title:"修改默认信息",width:"570",onClose:t[19]||(t[19]=e=>F(x.value))},{footer:u(()=>[d("span",Te,[l(i,{onClick:t[17]||(t[17]=e=>S.value=!1)},{default:u(()=>[a("我再想想")]),_:1}),l(i,{type:"primary",onClick:le},{default:u(()=>[a(" 确认修改 ")]),_:1})])]),default:u(()=>[d("div",ye,[ge,l(_,{modelValue:C.value,"onUpdate:modelValue":t[14]||(t[14]=e=>C.value=e),placeholder:"请填写要修改的ICON编码"},null,8,["modelValue"])]),d("div",be,[we,l(_,{modelValue:U.value,"onUpdate:modelValue":t[15]||(t[15]=e=>U.value=e),placeholder:"请填写要修改的菜单名称"},null,8,["modelValue"])]),d("div",Ve,[Ie,l(_,{modelValue:k.value,"onUpdate:modelValue":t[16]||(t[16]=e=>k.value=e),placeholder:"请修改菜单排序 越大越靠前"},null,8,["modelValue"])])]),_:1},8,["modelValue"])])}}});typeof Y=="function"&&Y(he);export{he as default};
