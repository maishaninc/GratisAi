
/**
 * 由 Fantastic-admin 提供技术支持
 * Powered by Fantastic-admin
 * Gitee  https://gitee.com/hooray/fantastic-admin
 * Github https://github.com/hooray/fantastic-admin
 */
  
import{_ as O}from"./index-fd8a5577.js";import{d as W,r as c,x as I,Q as A,h as s,o as p,c as P,e,f as l,a as i,l as f,I as j,J as X,S as $,U as G,k as Y,X as Z,E as M,t as ee,q as T}from"./index-e656eb90.js";import{a as B}from"./config-e611a8d0.js";const le={class:"flex justify-between"},te=i("b",null,[f("MJ参数设置："),i("a",{href:"https://api.lightai.io",target:"_blank",style:{"margin-right":"10px"}},"第三方中转"),f("推荐")],-1),ae=i("div",{style:{width:"250px"}}," 默认会存储图片到配置的存储中、如果开启此选择则表示不保存原图到我们配置的存储上、直接反代访问原始图片、这样可以进一步节省空间、但访问速度及稳定性可能有所降低！ ",-1),oe=i("div",{style:{width:"250px"}}," 开启不使用代理将直接使用重中转获取到的链接、原生discord地址国内无法访问! ",-1),ne=i("div",{style:{width:"250px"}}," 开启优化后, MJ 提示词默认会使用全局模型进行翻译/联想, 不再单独扣费, 请自行选择 ",-1),se=i("div",{style:{width:"250px"}}," 隐藏客户端绘图页面的【不需要的元素模块】【优化模块】。隐藏后用户不可选择无法选中模块 ",-1),ie=i("h4",null,"Dalle 绘图配置",-1),ue=i("div",{style:{width:"250px"}}," 开启连续绘画会在使用 Dalle 绘图的时候,调用全局模型,根据上文总结绘画要求 ",-1),de={style:{display:"flex","flex-wrap":"wrap",gap:"10px"}},re=W({__name:"proxy",setup(me){const m=c([]),h=c(!1),x=c(""),b=c(null);function D(){h.value=!0,Z(()=>{b.value.focus()})}function V(){let n=x.value.trim();n&&m.value.push(n),h.value=!1,x.value=""}function H(n){m.value.splice(n,1)}function L(){t.drawingStyles&&(m.value=t.drawingStyles.split(","))}I(()=>{L()});const t=A({mjTimeoutMs:"500000",mjProxyUrl:"",mjKey:"",mjLimitCount:"2",mjNotSaveImg:"0",mjHideNotBlock:"0",mjHideWorkIn:"0",drawingStyles:"",isMjTranslate:0,mjNotUseProxy:1,mjProxyImgUrl:"",isDalleChat:0,mjTranslatePrompt:""}),K=c({}),k=c();async function C(){const n=await B.queryConfig({keys:["mjTimeoutMs","mjKey","mjProxyUrl","mjLimitCount","mjNotSaveImg","mjHideNotBlock","mjHideWorkIn","drawingStyles","isMjTranslate","mjNotUseProxy","mjProxyImgUrl","isDalleChat","mjTranslatePrompt"]});Object.assign(t,n.data),n.data.drawingStyles?m.value=n.data.drawingStyles.split(","):m.value=[]}function R(){var n;t.drawingStyles=m.value.join(","),(n=k.value)==null||n.validate(async a=>{if(a){try{await B.setConfig({settings:q(t)}),M.success("变更配置信息成功")}catch{}C()}else M.error("请填写完整信息")})}function q(n){return Object.keys(n).map(a=>({configKey:a,configVal:n[a]}))}return I(()=>{C()}),(n,a)=>{const U=s("el-alert"),E=O,N=s("el-button"),w=s("el-input"),u=s("el-form-item"),d=s("el-col"),r=s("el-row"),_=s("el-switch"),y=s("QuestionFilled"),g=s("el-icon"),v=s("el-tooltip"),F=s("el-divider"),J=s("el-tag"),Q=s("el-form"),z=s("el-card");return p(),P("div",null,[e(E,null,{default:l(()=>[e(U,{closable:!1,"show-icon":"",title:"绘画参数配置说明",description:"绘画参数配置页面允许管理员自定义绘图功能的关键设置，包括绘图并发限制、是否存储图片、使用代理选项以及提示词的优化。",type:"success"})]),_:1}),e(z,{style:{margin:"20px"}},{header:l(()=>[i("div",le,[te,e(N,{class:"button",text:"",onClick:R},{default:l(()=>[f(" 保存设置 ")]),_:1})])]),default:l(()=>[e(Q,{ref_key:"formRef",ref:k,rules:K.value,model:t,"label-width":"150px"},{default:l(()=>[e(r,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"绘图并发限制",prop:"mjLimitCount","label-width":"120"},{default:l(()=>[e(w,{modelValue:t.mjLimitCount,"onUpdate:modelValue":a[0]||(a[0]=o=>t.mjLimitCount=o),placeholder:"单人同时绘制限制数量、同一时间最多可以绘制几张！",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"不存储图片",prop:"mjNotSaveImg","label-width":"120"},{default:l(()=>[e(_,{modelValue:t.mjNotSaveImg,"onUpdate:modelValue":a[1]||(a[1]=o=>t.mjNotSaveImg=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(v,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[ae]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(y)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"不使用代理",prop:"mjNotUseProxy","label-width":"120"},{default:l(()=>[e(_,{modelValue:t.mjNotUseProxy,"onUpdate:modelValue":a[2]||(a[2]=o=>t.mjNotUseProxy=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(v,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[oe]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(y)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),[0].includes(Number(t.mjNotUseProxy))?(p(),j(r,{key:0},{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"反代地址",prop:"mjProxyImgUrl","label-width":"120px"},{default:l(()=>[e(w,{modelValue:t.mjProxyImgUrl,"onUpdate:modelValue":a[3]||(a[3]=o=>t.mjProxyImgUrl=o),placeholder:"Midjourney 反代地址，为空将直接使用原链接",clearable:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):X("",!0),e(r,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"提示词优化",prop:"isMjTranslate","label-width":"120"},{default:l(()=>[e(_,{modelValue:t.isMjTranslate,"onUpdate:modelValue":a[4]||(a[4]=o=>t.isMjTranslate=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(v,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[ne]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(y)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"隐藏高级功能",prop:"mjHideNotBlock","label-width":"120"},{default:l(()=>[e(_,{modelValue:t.mjHideNotBlock,"onUpdate:modelValue":a[5]||(a[5]=o=>t.mjHideNotBlock=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(v,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[se]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(y)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(F),ie,e(r,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"连续绘画",prop:"isDalleChat","label-width":"120"},{default:l(()=>[e(_,{modelValue:t.isDalleChat,"onUpdate:modelValue":a[6]||(a[6]=o=>t.isDalleChat=o),"active-value":"1","inactive-value":"0"},null,8,["modelValue"]),e(v,{class:"box-item",effect:"dark",placement:"right"},{content:l(()=>[ue,f(" 1 ")]),default:l(()=>[e(g,{class:"ml-3 cursor-pointer"},{default:l(()=>[e(y)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(r,null,{default:l(()=>[e(d,{xs:24,md:20,lg:15,xl:12},{default:l(()=>[e(u,{label:"绘图风格关键词",prop:"drawingStyles","label-width":"120"},{default:l(()=>[i("div",de,[(p(!0),P($,null,G(m.value,(o,S)=>(p(),j(J,{key:S,closable:"",onClose:ce=>H(S),style:{"margin-bottom":"10px"}},{default:l(()=>[f(ee(o),1)]),_:2},1032,["onClose"]))),128)),h.value?(p(),j(w,{key:0,ref_key:"inputRef",ref:b,modelValue:x.value,"onUpdate:modelValue":a[7]||(a[7]=o=>x.value=o),size:"small",style:{"margin-left":"10px",width:"auto","min-width":"80px"},onKeyup:Y(V,["enter"]),onBlur:V},null,8,["modelValue"])):(p(),j(N,{key:1,size:"small",onClick:D,style:{"margin-left":"10px"}},{default:l(()=>[f("+ 添加风格")]),_:1}))])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1})])}}});typeof T=="function"&&T(re);export{re as default};
